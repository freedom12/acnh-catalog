# 图标切割工具

这个工具用于从包含多个小图标的拼接图片中，根据蓝色缝隙将各个图标切割出来。

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 基本用法

```bash
# 使用默认路径（../public/img/icon/139899.png）
python split_icons.py

# 指定图片路径
python split_icons.py <图片路径>

# 指定图片路径和输出目录
python split_icons.py <图片路径> <输出目录>
```

### 示例

```bash
# 切割 139899.png
python split_icons.py ../public/img/icon/139899.png output_icons

# 切割其他图片
python split_icons.py my_sprite_sheet.png my_icons
```

## 工作原理

该工具提供了两种切割方法：

### 方法1：基于蓝色分隔线的网格切割
- 检测图片中的蓝色分隔线（横向和纵向）
- 根据分隔线位置将图片切割成网格
- 过滤掉空白或纯蓝色的区域
- 保存有效的图标

### 方法2：基于连通区域的自动检测
- 识别所有非透明且非蓝色的像素
- 使用连通组件分析找到独立的图标区域
- 自动确定每个图标的边界
- 裁剪并保存每个图标

## 输出

- 切割后的图标会保存在指定的输出目录中
- 文件名格式：`icon_001.png`, `icon_002.png`, ...
- 保留原始图标的透明背景
- 两种方法的结果会分别保存在 `{输出目录}_grid` 和 `{输出目录}_auto` 目录中

## 参数调整

如果默认设置无法正确识别图标，可以在代码中调整以下参数：

- `is_blue_pixel()` 中的 `threshold`：蓝色检测阈值
- `find_blue_lines()` 中的比例（默认0.5）：判定为分隔线的蓝色像素比例
- 最小图标尺寸（默认10x10）：过滤太小区域的阈值
- `padding`：裁剪时添加的边距

## 注意事项

- 图片必须是PNG格式，支持透明背景
- 确保图标之间有明显的蓝色分隔线
- 工具会自动创建输出目录
